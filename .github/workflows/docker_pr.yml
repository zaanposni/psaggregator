name: Docker

on:
    pull_request:

jobs:
    build_frontend:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Build frontend
              working-directory: ./src/psaggregator
              run: docker build -t ghcr.io/${{ github.repository_owner }}/psaggregator_frontend:latest .

    build_nginx:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Build nginx
              working-directory: ./src/nginx
              run: docker build -t ghcr.io/${{ github.repository_owner }}/psaggregator_nginx:latest .

    build_dataimport:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Build dataimport
              working-directory: ./src/dataimport
              run: docker build -t ghcr.io/${{ github.repository_owner }}/psaggregator_dataimport:latest .
